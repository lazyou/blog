## SSH简介及工作机制
* https://blog.csdn.net/netwalk/article/details/12951031


### 1.SSH简介
* 传统的网络服务程序，如：ftp、POP 和 telnet 在 **本质上都是不安全的**，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。而且，这些服务程序的安全验证方式也是有其弱点的，就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。**所谓“中间人”** 的攻击方式，就是“中间人”冒充真正的服务器接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器。服务器和你之间的数据传送被“中间人”一转手做了手脚之后，就会出现很严重的问题。

* 从前，一个名为Tatu Yl?nen的芬兰程序员开发了一种网络协议和服务软件，称为 **SSH**（Secure SHell的缩写）。__通过使用SSH，你可以把所有传输的数据进行加密__，这样“中间人”这种攻击方式就不可能实现了，而且也能够防止DNS和IP欺骗。__还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度__。SSH有很多功能，虽然许多人把Secure Shell仅当作Telnet的替代物，但你可以使用它来保护你的网络连接的安全。你可以通过本地或远程系统上的Secure Shell转发其他网络通信，如POP、X、PPP和FTP。你还可以转发其他类型的网络通信，包括CVS和任意其他的TCP通信。另外，你可以使用带 TCP包装的Secure Shell，以加强连接的安全性。除此之外，Secure Shell还有一些其他的方便的功能，可用于诸如Oracle之类的应用，也可以将它用于远程备份和像SecurID卡一样的附加认证。


### 2.SSH的工作机制
* SSH分为两部分：客户端部分和服务端部分。

* **服务端** 是一个守护进程(demon)，他在后台运行并响应来自客户端的连接请求。服务端一般是 `sshd` 进程，提供了对远程连接的处理，一般包括公共密钥认证、密钥交换、对称密钥加密和非安全连接。

* 客户端包含 `ssh` 程序以及像 scp（远程拷贝）、slogin（远程登陆）、sftp（安全文件传输）等其他的应用程序。

* 他们的工作机制大致是本地的客户端发送一个连接请求到远程的服务端，服务端检查申请的包和IP地址再发送密钥给SSH的客户端，本地再将密钥发回给服务端，自此连接建立。刚才所讲的只是SSH连接的大致过程，SSH 1.x 和 SSH 2.x 在连接协议上还有着一些差异。

* SSH被设计成为工作于自己的基础之上而不利用超级服务器(inetd)，虽然可以通过 inetd 上的 tcpd 来运行SSH进程，但是这完全没有必要。启动 SSH 服务器后，`sshd` 运行起来并在默认的 **22端口** 进行监听（你可以用 `ps -waux | grep sshd` 来查看sshd是否已经被正确的运行了）如果不是通过inetd启动的SSH，那么SSH就将一直等待连接请求。 **当请求到来的时候 SSH 守护进程会产生一个子进程，该子进程进行这次的连接处理。**

* 但是因为受版权和加密算法的限制，现在很多人都转而使用 **OpenSSH***。OpenSSH 是 SSH 的替代软件，而且是免费的，

* SSH 是由客户端和服务端的软件组成的，有两个不兼容的版本分别是：1.x和2.x。用 SSH 2.x 的客户程序是不能连接到 SSH 1.x 的服务程序上去的。OpenSSH 2.x 同时支持SSH 1.x和2.x。
